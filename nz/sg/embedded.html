<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=570" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<title>Schoolgen Energy Profile</title>
	<link type="text/css" rel="stylesheet" href="css/font-awesome.min.css" />
	<link type="text/css" rel="stylesheet" href="sg.css" />
</head>
<body class="embedded snroot noselect">
	<button type="button" id="time-range-view-lifetime">Lifetime</button>
	<button type="button" id="time-range-view-today">Today</button>
	<h2 class="time-range"></h2>
	<div class="pane chart energy-bar-chart watthour-chart noselect">
		<div class="energy-bar-chart hbox">
			<div class="y-axis-label">
				<h3 class="label">Energy <span class="alt"><span class="unit">kWh</span></span></h3>
			</div>
			<div id="energy-bar-chart" class="chart-container"></div>
		</div>
	</div>
	<div class="totals">
		<div class="hbox">
			<div class="label consumption">Grid</div>
			<div class="count consumption"><span id="consumption-count">0</span> <span class="alt unit">kWh</span></div>
			<div class="label generation">Solar</div>
			<div class="count generation"><span id="generation-count"></span> <span class="alt unit">kWh</span></div>
		</div>
	</div>
	<div class="hbox">
		<div class="info-col vbox">
			<button type="button" id="help-howto" data-modal="#help-howto-modal"><i class="fa fa-question-circle"></i> <span class="text">How to use</span></button>
			<div class="totals">
				<div class="consumption vbox">
					<div class="label consumption detailed">CO<sub>2</sub> Emitted</div>
					<div class="count detailed"><span id="consumption-co2-count">0</span> <span class="alt unit">kg</span></div>
				</div>
			</div>
			<img src="img/schoolgen-logo-280x68.png" width="140" height="34" alt="Genesis | Schoolgen logo">
		</div>
		<div class="chart pie-chart watthour-chart">
			<div id="energy-pie-chart" class="chart-container"></div>
			<button type="button" id="download-data-csv"><i class="fa fa-download"></i> <span class="text">Download data</span></button>
		</div>
		<div class="info-col vbox">
			<button type="button" id="chart-detail-toggle"><i class="fa fa-info-circle"></i> <span class="text">Show more</span></button>
			<div class="totals">
				<div class="generation vbox">
					<div class="label generation detailed">CO<sub>2</sub> Avoided</div>
					<div class="count detailed"><span id="generation-co2-count">0</span> <span class="alt unit">kg</span></div>
				</div>
			</div>
			<div class="caption">&copy; Copyright 2015</div>
		</div>
	</div>
	<p id="chart-outdated-msg" class="msg">
		Data as of <span class="value">14 June 2014 21:00</span>
	</p>
	
	<div id="energy-bar-chart-tooltip" style="display: none;" class="tooltip">
		<h4></h4>
		<div class="source-labels"></div>
	</div>
	<div id="energy-pie-chart-tooltip" style="display: none;" class="tooltip">
		<h4></h4>
		<div>
			<table>
				<tbody>
					<tr>
						<td class="swatch"></td>
						<td class="desc"><span class="percent">0%</span> = <span class="energy">0</span> <span class="unit">(kWh)</span></td>
						<td class="co2"><span class="co2">0</span> kg CO2</td>
					</tr>
					<tr class="total">
						<td colspan="2"><span class="label">Net:</span> <span class="energy">0</span> <span class="unit">(kWh)</span></td>
						<td><span class="co2">0</span> kg CO2</td>
					</tr>
				</tbody>
			
			</table>
		</div>
	</div>
	<div id="help-howto-modal" class="modal mouse" style="display: none;">
		<button class="close" type="button">X</button>
		<h4>What do the Graphs Show?</h4>
		<ul>
			<li>The <b>bar-graph</b>'s <span class="generation">YELLOW</span> bars show the amount of <b>electrical energy</b>
				generated by the school's <b>Solar PV</b> array. Generally this is used immediately in the school by lights, 
				heaters, computers, fridges etc.</li>
			<li>The <b>pie-graph</b> represents where the electrical energy used by the school comes from - the 
			<span class="generation">YELLOW</span> pie segment 
			shows the percentage of school solar generated electricity compared to how much electricity is imported from the Grid 
			(<span class="consumption">ORANGE</span> pie segment).</li>
		</ul>
		
		<h4>Navigation for graphs</h4>
		<ul class="touch">
			<li>To <b>zoom in</b>: <i>double-tap</i> on any bar on the graph.</li>
			<li>To <b>zoom out</b>: <i>two-finger double-tap</i> anywhere on bar-graph.</li>
			<li>To select a <b>range</b>: <i>tap</i> once on any bar you wish to start on, 
				<i>tap</i> again on the bar you wish to end on.</li>
			<li><i>Tap</i> on <b>Today</b> button to see today's energy in high detail.</li>
			<li><i>Tap</i> on <b>Lifetime</b> button to see total energy measured by the system.</li>
			<li>To view <b>solar and grid</b> energy together, <i>tap</i> on the <b>Show more</b> button.</li>
		</ul>
		<ul class="mouse">
			<li>To <b>zoom in</b>: <i>double-click</i> on any bar on the graph.</li>
			<li>To <b>zoom out</b>: hold down <i><b>alt</b>-key</i> and <i><b>double-click</b></i> anywhere on bar-graph.</li>
			<li>To select a <b>range</b>: <i>click</i> once on any bar you wish to start on, hold down <i><b>shift</b>-key</i>, 
				and highlight a range, <i>click</i> on the bar you wish to go to.</li>
			<li><i>Click</i> on <b>Today</b> button to see today's energy in high detail.</li>
			<li><i>Click</i> on <b>Lifetime</b> button to see total energy measured by the system.</li>
			<li>To view <b>solar and grid</b> energy together, <i>click</i> on the <b>Show more</b> button.</li>
		</ul>
		
		<h4>Show more</h4>
		<ul>
			<li>The <span class="consumption">ORANGE</span> bars show the amount of electrical energy passing into, 
				or out of, the main switch-board at the school. If it is <b>entering</b> the school from the Grid 
				(being <b>imported</b>) it is <u>below</u> the line (x-axis).</li>
			<li>Shows the amount of <span class="generation">CO<sub>2</sub> Avoided</span> in kilograms (kg) by 
				generating the electricity with solar panels in NZ, compared to the amount of
				<span class="consumption">CO<sub>2</sub> Emitted</span> by electricity generated by fossil-fuel 
				power stations (imported from the Grid).</li>
			<li>If the <span class="consumption">ORANGE</span> bar is <u>above</u> the line, this shows the amount of solar 
				generated electricity leaving the school to the Grid (being <b>exported</b>). Unless the school 
				has a large solar array or is small and very energy efficient it will not generally export any electricity. 
				Look for sunny days during the weekend to see if you can spot any <b>solar export</b> to the Grid!</li>
			<li>Electrical energy is typically measured in <b>kilowatt-hours (kWh)</b> - this is what the consumer 
				pays for (along with fixed line charges).</li>
		</ul>
	</div>

	<script type="text/javascript" src="js-lib/d3-3.4.8.min.js"></script>
	<script type="text/javascript" src="js-lib/colorbrewer.js"></script>
	<script type="text/javascript" src="js-lib/queue-1.0.7.min.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-datum.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-base.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-base-bar.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-energy-io.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-pie-io.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-util-counter.js"></script>
	<script type="text/javascript" src="sg.js"></script>
	<script type="text/javascript">
	function startApp() {
		if ( sn && sn.runtime && sn.runtime.sgSchoolApp ) {
			sn.runtime.sgSchoolApp();
		}
	}
	if ( !window.isLoaded ) {
		window.addEventListener("load", function() {
			startApp();
		}, false);
	} else {
		startApp();
	}
	</script>
</body>
</html>

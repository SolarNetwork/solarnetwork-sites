<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=570" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<title>Schoolgen Energy Profile</title>
	<link type="text/css" rel="stylesheet" href="css/font-awesome.min.css" />
	<link type="text/css" rel="stylesheet" href="sg.css" />
</head>
<body class="embedded snroot">
	<button type="button" id="time-range-view-today">Today</button>
	<h2 class="time-range"></h2>
	<div class="pane chart energy-bar-chart watthour-chart noselect">
		<div class="energy-bar-chart hbox">
			<div class="y-axis-label">
				<h3 class="label">Energy <span class="alt"><span class="unit">kWh</span></span></h3>
			</div>
			<div id="energy-bar-chart" class="chart-container"></div>
		</div>
	</div>
	<div class="totals shown">
		<div class="generation hbox">
			<div class="label generation">Solar</div>
			<div class="count">
				<span id="generation-count">0</span> <span class="alt unit">kWh</span>
			</div>
		</div>
		<div class="consumption hbox">
			<div class="label consumption">Grid</div>
			<div class="count">
				<span id="consumption-count">0</span> <span class="alt unit">kWh</span>
			</div>
		</div>
	</div>
	<div class="hbox">
		<div class="info-col">
			<button type="button" id="help-howto" data-modal="#help-howto-modal"><i class="fa fa-question-circle"></i> <span class="text">How to use</span></button>
			<div class="totals">
				<div class="consumption vbox">
					<div class="label consumption detailed">CO<sub>2</sub> Emitted</div>
					<div class="count detailed"><span id="consumption-co2-count">0</span> <span class="alt unit">kg</span></div>
				</div>
			</div>
			<button type="button" id="download-data-csv"><i class="fa fa-download"></i> <span class="text">Download data</span></button>
		</div>
		<div class="pane chart pie-chart watthour-chart">
			<div id="energy-pie-chart" class="chart-container"></div>
		</div>
		<div class="info-col">
			<div class="detail-toggle">
				<button type="button" id="chart-detail-toggle"><i class="fa fa-info-circle"></i> <span class="text">Show more</span></button>
			</div>
			<div class="totals">
				<div class="generation vbox">
					<div class="label generation detailed">CO<sub>2</sub> Avoided</div>
					<div class="count detailed"><span id="generation-co2-count">0</span> <span class="alt unit">kg</span></div>
				</div>
			</div>
			<div id="chart-outdated-msg" class="msg">
				Data as of <span class="value">14 June 2014 21:00</span>
			</div>
		</div>
	</div>
	<div class="totals lifetime detailed">
		<div class="hbox">
			<div class="label consumption">Lifetime Grid</div>
			<div class="count consumption"><span id="lifetime-consumption-count">0</span> <span class="alt unit">kWh</span></div>
			<div class="label generation">Lifetime Solar</div>
			<div class="count generation"><span id="lifetime-generation-count"></span> <span class="alt unit">kWh</span></div>
		</div>
	</div>
	<div id="energy-bar-chart-tooltip" style="display: none;" class="tooltip">
		<h3></h3>
		<div class="source-labels"></div>
	</div>
	<div id="energy-pie-chart-tooltip" style="display: none;" class="tooltip">
		<h3></h3>
		<div>
			<table>
				<tbody>
					<tr>
						<td class="swatch"></td>
						<td class="desc"><span class="percent">0%</span> = <span class="energy">0</span> <span class="unit">(kWh)</span></td>
						<td class="co2"><span class="co2">0</span> kg CO2</td>
					</tr>
					<tr class="total">
						<td colspan="2"><span class="label">Net:</span> <span class="energy">0</span> <span class="unit">(kWh)</span></td>
						<td><span class="co2">0</span> kg CO2</td>
					</tr>
				</tbody>
			
			</table>
		</div>
	</div>
	<div id="help-howto-modal" class="modal mouse" style="display: none;">
		<button class="close" type="button">X</button>
		<h4>Navigation for graphs</h4>
		<ul>
			<li>To <b>zoom in</b>: double-click on any bar on the graph.</li>
			<li>To <b>zoom out</b>: hold down <b>alt</b>-key and double-click anywhere on bar-graph.</li>
			<li>To select a <b>range</b>: click once on any bar you wish to start on, hold down <b>shift</b>-key, 
				highlight a range, and click on the bar you wish to go to.</li>
			<li>Click on <b>Today</b> button to see today's energy in high detail.</li>
			<!--li>Click on <b>Lifetime</b> button to see total energy measured by the system.</li-->
			<li>To view solar generation only click on the yellow part of the pie graph.</li>
		</ul>
		
		<h4>Show more</h4>
		<ul>
			<li>Shows the CO<sub>2</sub> avoided by generating electricity with solar panels, as well as the CO<sub>2</sub>
				emitted to produce that amount of energy from the grid (due to fossil fuel power stations).</li>
			<li>Shows the "lifetime" (total) electricity generated by the PV system from solar energy, and the 
				"lifetime" (total) electricity imported from the grid from when measurement was started.</li>
			<li>Breaks down the grid supply energy into individual phases for the time period selected on the bar and pie graphs.</li>
		</ul>
	</div>

	<script type="text/javascript" src="js-lib/d3-3.4.8.min.js"></script>
	<script type="text/javascript" src="js-lib/colorbrewer.js"></script>
	<script type="text/javascript" src="js-lib/queue-1.0.7.min.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-datum.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-base.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-base-bar.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-energy-io.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-chart-pie-io.js"></script>
	<script type="text/javascript" src="js-lib/solarnetwork-d3-util-counter.js"></script>
	<script type="text/javascript" src="sg.js"></script>
	<script type="text/javascript">
	function startApp() {
		if ( sn && sn.runtime && sn.runtime.sgSchoolApp ) {
			sn.runtime.sgSchoolApp();
		}
	}
	if ( !window.isLoaded ) {
		window.addEventListener("load", function() {
			startApp();
		}, false);
	} else {
		startApp();
	}
	</script>
</body>
</html>
